window.__require=function t(e,n,o){function r(c,a){if(!n[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var p="function"==typeof __require&&__require;if(!a&&p)return p(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var u=n[c]={exports:{}};e[c][0].call(u.exports,function(t){return r(e[c][1][t]||t)},u,u.exports,t,e,n,o)}return n[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<o.length;c++)r(o[c]);return r}({Main:[function(t,e,n){"use strict";cc._RF.push(e,"0bd11QTl1VB5bUr30q7aXQm","Main");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aniBtn=null,e.backNode=null,e.spine=null,e.name=null,e.track=0,e.alpha=!1,e}return r(e,t),e.prototype.getUrlParam=function(t){var e=location.search,n={};if(-1!=e.indexOf("?"))for(var o=e.substring(1).split("&"),r=0;r<o.length;r++)n[o[r].split("=")[0]]=decodeURI(o[r].split("=")[1]);if(t)return n[t]},e.prototype.getWindowParam=function(t){return window[t]},e.prototype.onLoad=function(){var t=this;window.cocos={setName:function(e){t.name=e,t.spine.setAnimation(t.track,t.name,!0)},setColor:function(e){var n=new cc.Color;cc.Color.fromHEX(n,e),t.backNode.color=n},setTrack:function(e){t.track=e,t.spine.setAnimation(t.track,t.name,!0)},setAlpha:function(e){t.spine.premultipliedAlpha=e}};var e={json:this.getWindowParam("json"),png:this.getWindowParam("png"),atlas:this.getWindowParam("atlas")};this.loadRemote(e,function(e,n,o){console.log("\u52a0\u8f7d\u5b8c\u6210");var r=o.text.split("\n")[1],i=new cc.Node;i.parent=t.node;var c=i.addComponent(sp.Skeleton);t.spine=c;var a=new sp.SkeletonData;a.skeletonJson=e.json,a.textures.push(n),a.atlasText=o.text,a.textureNames.push(r),c.skeletonData=a;var s=[];for(var p in e.json.animations)s.push(p);t.name=s[0],c.setAnimation(0,s[0],!0),t.createAniBtns(s),t.setTouch()})},e.prototype.createAniBtns=function(t){window.func.aniList(t)},e.prototype.loadRemote=function(t,e){var n=null,o=null,r=null,i=function(){o&&n&&r&&e(n,o,r)};cc.assetManager.loadRemote(t.png,function(t,e){t||(o=e,i())}),cc.assetManager.loadRemote(t.json,function(t,e){t||(n=e,i())}),cc.assetManager.loadRemote(t.atlas,function(t,e){t||(r=e,i())})},e.prototype.setTouch=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){t.spine.node.x+=e.getDelta().x,t.spine.node.y+=e.getDelta().y}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(t){console.log(t.keyCode)}),this.node.on(cc.Node.EventType.MOUSE_WHEEL,function(e){t.spine.node.scale+=e.getScrollY()/1200,t.spine.node.scale<.1&&(t.spine.node.scale=.1),console.log(e.getScrollY())})},i([s({type:cc.Prefab})],e.prototype,"aniBtn",void 0),i([s({type:cc.Node})],e.prototype,"backNode",void 0),i([a],e)}(cc.Component);n.default=p,cc._RF.pop()},{}],Request:[function(t,e,n){"use strict";cc._RF.push(e,"2d1a4dswrBHk5stMw+dGSkV","Request");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){var e=t.call(this)||this;return e.domain="https://spine.sunstones.cc/",e.timeout=5e3,e.retry=!0,e.retryTime=2,e.type="POST",""!=window.apiDoMain&&null!=window.apiDoMain&&(e.domain=window.apiDoMain),e}var n;return r(e,t),n=e,e.getApp=function(){return this.request||(this.request=new n),this.request},e.prototype.open=function(t,e,n,o){var r=this;void 0===e&&(e=null),void 0===n&&(n=function(){}),void 0===o&&(o=0);var i=new XMLHttpRequest;i.timeout=this.timeout,i.onload=function(){if(4==i.readyState&&200==i.status){var c=void 0;try{c=JSON.parse(i.responseText)}catch(a){c=i.responseText}n(c)}else r.retry&&(o>=r.retryTime||r.scheduleOnce(function(){r.open(t,e,n,o+1)},.5))},i.ontimeout=function(){r.retry&&(o>=r.retryTime||r.open(t,e,n,o+1))},i.onerror=function(){};var c=null;e&&(c=JSON.stringify(e)),this.getTimeStamp(),i.open(this.type,this.domain+t,!0),i.send(c)},e.prototype.getTimeStamp=function(){return Date.parse(new Date+"")/1e3},e.prototype.getCookie=function(t){var e=document.cookie.split("; "),n=new Array;return e.forEach(function(t){var e=t.split("=");n[e[0]]=e[1]}),n[t]?n[t]:null},e.request=null,n=i([a],e)}(cc.Component));n.default=s,cc._RF.pop()},{}]},{},["Main","Request"]);