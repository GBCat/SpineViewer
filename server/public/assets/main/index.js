window.__require=function t(e,o,n){function r(c,a){if(!o[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var p="function"==typeof __require&&__require;if(!a&&p)return p(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var l=o[c]={exports:{}};e[c][0].call(l.exports,function(t){return r(e[c][1][t]||t)},l,l.exports,t,e,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({Main:[function(t,e,o){"use strict";cc._RF.push(e,"0bd11QTl1VB5bUr30q7aXQm","Main");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aniBtn=null,e.backNode=null,e.logNode=null,e.spine=null,e.name=null,e.track=0,e.alpha=!1,e}return r(e,t),e.prototype.getUrlParam=function(t){var e=location.search,o={};if(-1!=e.indexOf("?"))for(var n=e.substring(1).split("&"),r=0;r<n.length;r++)o[n[r].split("=")[0]]=decodeURI(n[r].split("=")[1]);if(t)return o[t]},e.prototype.getWindowParam=function(t){return window[t]},e.prototype.onLoad=function(){var t=this;window.cocos={setName:function(e){t.name=e,t.spine.setAnimation(t.track,t.name,!0)},setColor:function(e){var o=new cc.Color;cc.Color.fromHEX(o,e),t.backNode.color=o},setTrack:function(e){t.track=e,t.spine.setAnimation(t.track,t.name,!0)},setAlpha:function(e){t.spine.premultipliedAlpha=e}};var e={json:this.getWindowParam("json"),png:this.getWindowParam("png"),atlas:this.getWindowParam("atlas")};this.loadRemote(e,function(e,o,n){t.log("\u52a0\u8f7d\u5b8c\u6210");try{var r=n.text.split("\n")[1].replace("\r",""),i=new cc.Node;i.parent=t.node;var c=i.addComponent(sp.Skeleton);t.spine=c;var a=new sp.SkeletonData;a.skeletonJson=e.json,a.textures.push(o),a.atlasText=n.text,a.textureNames.push(r),c.skeletonData=a;var s=[];for(var p in e.json.animations)s.push(p);s.length?(t.name=s[0],c.setAnimation(0,s[0],!0),t.createAniBtns(s),t.setTouch(),t.log("")):t.log("\u83b7\u53d6\u52a8\u753b\u5217\u8868\u5931\u8d25")}catch(l){t.log("\u52a0\u8f7d\u52a8\u753b\u5931\u8d25"),console.error(l)}})},e.prototype.createAniBtns=function(t){window.func.aniList(t)},e.prototype.log=function(t){this.logNode.getComponent(cc.Label).string=t},e.prototype.loadRemote=function(t,e){var o=this,n=null,r=null,i=null,c=function(){r&&n&&i&&e(n,r,i)};this.log("\u6b63\u5728\u52a0\u8f7d\u8d44\u6e90"),cc.assetManager.loadRemote(t.png,function(t,e){t?o.log(".png\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25"):(o.log(".png\u6587\u4ef6\u52a0\u8f7d\u6210\u529f"),r=e,c())}),cc.assetManager.loadRemote(t.json,function(t,e){t?o.log(".json\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25"):(o.log(".json\u6587\u4ef6\u52a0\u8f7d\u6210\u529f"),n=e,c())}),cc.assetManager.loadRemote(t.atlas,function(t,e){t?o.log(".atlas\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25"):(o.log(".atlas\u6587\u4ef6\u52a0\u8f7d\u6210\u529f"),i=e,c())})},e.prototype.setTouch=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){t.spine.node.x+=e.getDelta().x,t.spine.node.y+=e.getDelta().y}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(t){console.log(t.keyCode)}),this.node.on(cc.Node.EventType.MOUSE_WHEEL,function(e){t.spine.node.scale+=e.getScrollY()/1200,t.spine.node.scale<.1&&(t.spine.node.scale=.1),console.log(e.getScrollY())})},i([s({type:cc.Prefab})],e.prototype,"aniBtn",void 0),i([s({type:cc.Node})],e.prototype,"backNode",void 0),i([s({type:cc.Node})],e.prototype,"logNode",void 0),i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],Request:[function(t,e,o){"use strict";cc._RF.push(e,"2d1a4dswrBHk5stMw+dGSkV","Request");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){var e=t.call(this)||this;return e.domain="https://spine.sunstones.cc/",e.timeout=5e3,e.retry=!0,e.retryTime=2,e.type="POST",""!=window.apiDoMain&&null!=window.apiDoMain&&(e.domain=window.apiDoMain),e}var o;return r(e,t),o=e,e.getApp=function(){return this.request||(this.request=new o),this.request},e.prototype.open=function(t,e,o,n){var r=this;void 0===e&&(e=null),void 0===o&&(o=function(){}),void 0===n&&(n=0);var i=new XMLHttpRequest;i.timeout=this.timeout,i.onload=function(){if(4==i.readyState&&200==i.status){var c=void 0;try{c=JSON.parse(i.responseText)}catch(a){c=i.responseText}o(c)}else r.retry&&(n>=r.retryTime||r.scheduleOnce(function(){r.open(t,e,o,n+1)},.5))},i.ontimeout=function(){r.retry&&(n>=r.retryTime||r.open(t,e,o,n+1))},i.onerror=function(){};var c=null;e&&(c=JSON.stringify(e)),this.getTimeStamp(),i.open(this.type,this.domain+t,!0),i.send(c)},e.prototype.getTimeStamp=function(){return Date.parse(new Date+"")/1e3},e.prototype.getCookie=function(t){var e=document.cookie.split("; "),o=new Array;return e.forEach(function(t){var e=t.split("=");o[e[0]]=e[1]}),o[t]?o[t]:null},e.request=null,o=i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}]},{},["Main","Request"]);